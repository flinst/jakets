/// <reference path="./ExternalTypings.d.ts" />
"use strict";
const ChildProcess = require("child_process");
require("jake");
const ShellJs = require("shelljs");
exports.Shell = ShellJs;
let LogLevel = parseInt(process.env.logLevel) || 0;
function Log(msg, level = 1) {
    if (level <= LogLevel) {
        console.log(msg);
    }
}
exports.Log = Log;
Log("Logging level is " + LogLevel, 2);
function LogTask(t, level) {
    Log(`${t.taskStatus} => ${t.name}: ['${t.prereqs.join("', '")}']`, level);
}
exports.LogTask = LogTask;
function Exec(cmd, callback, isSilent) {
    let cmdArray;
    if (Array.isArray(cmd)) {
        cmdArray = cmd;
    }
    else {
        cmdArray = [cmd];
    }
    // isSilent || console.log(cmd);
    Log(cmdArray, 0);
    if (isSilent && cmdArray.length === 1) {
        ChildProcess.exec(cmdArray[0], callback);
    }
    else {
        jake.exec(cmdArray, callback, { printStdout: true, printStderr: true });
    }
}
exports.Exec = Exec;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSmFrZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkpha2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsK0NBQStDOztBQUUvQyxNQUFZLFlBQVksV0FBTSxlQUFlLENBQUMsQ0FBQTtBQUM5QyxRQUFPLE1BQU0sQ0FBQyxDQUFBO0FBQ2QsTUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDeEIsYUFBSyxHQUFHLE9BQU8sQ0FBQztBQUUzQixJQUFJLFFBQVEsR0FBVyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFM0QsYUFBb0IsR0FBRyxFQUFFLEtBQUssR0FBVyxDQUFDO0lBQ3hDLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkIsQ0FBQztBQUNILENBQUM7QUFKZSxXQUFHLE1BSWxCLENBQUE7QUFFRCxHQUFHLENBQUMsbUJBQW1CLEdBQUcsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBUXZDLGlCQUF3QixDQUFPLEVBQUUsS0FBYztJQUM3QyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsVUFBVSxPQUFPLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM1RSxDQUFDO0FBRmUsZUFBTyxVQUV0QixDQUFBO0FBRUQsY0FBcUIsR0FBc0IsRUFBRSxRQUFRLEVBQUUsUUFBa0I7SUFDdkUsSUFBSSxRQUFrQixDQUFDO0lBQ3ZCLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLFFBQVEsR0FBRyxHQUFHLENBQUM7SUFDakIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sUUFBUSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUNELGdDQUFnQztJQUNoQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUMxRSxDQUFDO0FBQ0gsQ0FBQztBQWRlLFlBQUksT0FjbkIsQ0FBQSJ9